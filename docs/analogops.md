# アナログ環境での運転・設定

このデコーダソフトウェアは、アナログ環境での走行にある程度対応しております。
<br>そのため、本デコーダソフトウェアを搭載した車両を、DCC環境を用意できない場所や、DCCの使用を禁止されている場所に持ち込んでも支障なく運転を楽しんでいただくことができます。

しかし、DCCデコーダに使用しているマイコンや内部回路の動作電圧の都合などから、操作は通常のアナログ車両と若干異なる方法となります。

本デコーダソフトウェアでは、ボリュームを最大まで回しても速度を抑制して走行可能な設定や、加速時における加速度を設定できるため、調整次第ではアナログ環境下でもリアルな運転を楽しむことも可能です。

---

## アナログ走行の方法

アナログ走行を行うためには、下記の方法を行います。

  * パワーパックのボリュームを80%程度まで回す
    <br>パワーパックボリュームを回しても、後述する加速度の設定ですぐには動き出さないので問題ありません。
    <br>また、最高速度近くで暴走することもありません。
  * 車両の動き出しを待つ
    <br>デコーダが線路電圧・走行方向を判別して動作を開始します。
  * 速度を調整する
    <br>パワーパックのボリュームを動かして速度を微調整します。
    <br>通常のアナログ車両の走行と異なり、パワーパックのボリュームを絞りすぎるとデコーダが停止して車両が止まってしまいます。


---

## アナログ走行のための設定項目

アナログ走行にかかわるCV番号、設定内容は下記となります。
<br>必要に応じて設定を変更して使用してください。

<table>
  <tr>
    <th>CV番号</th>
    <th>初期値</th>
    <th>アナログ走行時の設定内容</th>
  </tr>
  <tr>
    <td>29</td>
    <td>6</td>
    <td>bit2: アナログ走行の有効・無効<br>Bit2 = 1でアナログ走行有効</td>
  </tr>
  <tr>
    <td>50</td>
    <td>255</td>
    <td>アナログ走行時のファンクション有効化フラグ
    <br>(bit8: Func8, bit7: Func7, ..., bit0: Func0)</td>
  </tr>
  <tr>
    <td>58</td>
    <td>127</td>
    <td>アナログ走行時の最高速度<br>0-255で速度の上限を設定<br>(初期値の127では、127/255=約50%)</td>
  </tr>
  <tr>
    <td>59</td>
    <td>3</td>
    <td>アナログ走行時の加速度<br>線路電圧・走行方向判別完了後の加速動作時に使用する加速度</td>
  </td>
</table>

---

## アナログ走行の動作確認済み環境

[README.md](../README.md)も参照ください。

  * TOMIX PowerUnit (5001)
  * TOMIX TCS PowerUnit N-1000CL (5502)
  * KATO パワーパックスタンダードS (22-012)
  * KATO パワーパックハイパーDX (22-017)
  * KATO パワーパックスタンダードSX (22-018)

これ以外の環境で動いた場合は情報をお寄せいただくか、あるいはGithubからリクエストいただけると追加します。